<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Waste Sustainability Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section, .results-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .input-section h2, .results-section h2 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 600;
            font-size: 0.95em;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .result-card h3 {
            color: #495057;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .result-subtitle {
            color: #6c757d;
            font-size: 0.9em;
        }

        .score-indicator {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .score-excellent {
            background: #d4edda;
            color: #155724;
        }

        .score-good {
            background: #d1ecf1;
            color: #0c5460;
        }

        .score-moderate {
            background: #fff3cd;
            color: #856404;
        }

        .score-poor {
            background: #f8d7da;
            color: #721c24;
        }

        .comparison-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .recommendation-box {
            background: #e7f3ff;
            border-left: 5px solid #2196F3;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }

        .recommendation-box h4 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        .recommendation-box ul {
            margin-left: 20px;
            color: #555;
        }

        .recommendation-box li {
            margin-bottom: 8px;
        }

        .chart-container {
            margin-top: 20px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }

            .container {
                padding: 20px;
            }
        }

        .info-tooltip {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 0.8em;
            line-height: 18px;
            cursor: help;
            margin-left: 5px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üå± Food Waste Sustainability Calculator</h1>
        <p class="subtitle">Calculate the true cost and environmental impact of your food waste</p>

        <div class="calculator-grid">
            <!-- Input Section -->
            <div class="input-section">
                <h2>üìù Enter Your Data</h2>

                <div class="form-group">
                    <label for="foodCategory">Food Category <span class="info-tooltip" title="Select the type of food">?</span></label>
                    <select id="foodCategory">
                        <option value="">-- Select Category --</option>
                        <option value="beef">Beef</option>
                        <option value="pork">Pork</option>
                        <option value="chicken">Chicken</option>
                        <option value="fish">Fish</option>
                        <option value="eggs">Eggs</option>
                        <option value="cheese">Cheese</option>
                        <option value="milk">Milk</option>
                        <option value="bread">Bread</option>
                        <option value="rice">Rice</option>
                        <option value="vegetables">Vegetables</option>
                        <option value="fruits">Fruits</option>
                        <option value="berries">Berries</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="purchaseWeight">Purchase Weight (kg) <span class="info-tooltip" title="Total weight purchased">?</span></label>
                    <input type="number" id="purchaseWeight" placeholder="e.g., 10" step="0.1" min="0">
                </div>

                <div class="form-group">
                    <label for="purchaseCost">Purchase Cost ($) <span class="info-tooltip" title="Total amount paid">?</span></label>
                    <input type="number" id="purchaseCost" placeholder="e.g., 25.00" step="0.01" min="0">
                </div>

                <div class="form-group">
                    <label for="wasteWeight">Waste Weight (kg) <span class="info-tooltip" title="Amount thrown away">?</span></label>
                    <input type="number" id="wasteWeight" placeholder="e.g., 6" step="0.1" min="0">
                </div>

                <div class="form-group">
                    <label for="daysToExpiry">Days to Expiry <span class="info-tooltip" title="Days remaining before expiration">?</span></label>
                    <input type="number" id="daysToExpiry" placeholder="e.g., 5" min="0">
                </div>

                <div class="form-group">
                    <label for="disposalMethod">Disposal Method</label>
                    <select id="disposalMethod">
                        <option value="landfill">Landfill</option>
                        <option value="composting">Composting</option>
                        <option value="incineration">Incineration</option>
                    </select>
                </div>

                <button class="btn" onclick="calculateImpact()">üîç Calculate Impact</button>
            </div>

            <!-- Results Section -->
            <div class="results-section">
                <h2>üìä Your Results</h2>

                <div id="resultsContainer" class="hidden">
                    <div class="result-card">
                        <h3>üí∞ Economic Impact</h3>
                        <div class="result-value" id="trueCostPerKg">$0.00/kg</div>
                        <div class="result-subtitle">True cost per kg (vs. <span id="apparentCost">$0.00/kg</span> apparent)</div>
                        <div class="result-subtitle">Total money wasted: <strong id="wasteCost">$0.00</strong></div>
                        <div class="result-subtitle">Cost multiplier: <strong id="costMultiplier">0.0x</strong></div>
                    </div>

                    <div class="result-card">
                        <h3>üåç Environmental Impact</h3>
                        <div class="result-value" id="carbonSaved">0 kg CO‚ÇÇe</div>
                        <div class="result-subtitle">Carbon emissions from waste</div>
                        <div class="result-subtitle">Production impact: <span id="productionImpact">0</span> kg CO‚ÇÇe</div>
                        <div class="result-subtitle">Disposal impact: <span id="disposalImpact">0</span> kg CO‚ÇÇe</div>
                    </div>

                    <div class="result-card">
                        <h3>‚≠ê Sustainability Score</h3>
                        <div class="result-value" id="compositeScore">0/100</div>
                        <div id="scoreIndicator" class="score-indicator">-</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="scoreProgress" style="width: 0%">0%</div>
                        </div>
                    </div>

                    <div class="result-card">
                        <h3>üìà Waste Probability</h3>
                        <div class="result-value" id="wasteProbability">0%</div>
                        <div class="result-subtitle">Based on days to expiry</div>
                    </div>
                </div>

                <div id="placeholderText">
                    <p style="text-align: center; color: #999; padding: 50px 20px;">
                        Enter your food waste data and click "Calculate Impact" to see your results.
                    </p>
                </div>
            </div>
        </div>

        <!-- Recommendations Section -->
        <div id="recommendationsSection" class="hidden">
            <div class="recommendation-box">
                <h4>üí° Personalized Recommendations</h4>
                <ul id="recommendationsList"></ul>
            </div>
        </div>

        <!-- Comparison Table -->
        <div id="comparisonSection" class="hidden">
            <h2 style="margin-top: 30px; margin-bottom: 20px; color: #495057;">üìã Detailed Breakdown</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                        <th>Target</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="comparisonTableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Carbon emission factors database
        const emissionFactors = {
            beef: { production: 99.0, category: 'Protein' },
            pork: { production: 12.0, category: 'Protein' },
            chicken: { production: 9.0, category: 'Protein' },
            fish: { production: 13.0, category: 'Protein' },
            eggs: { production: 4.5, category: 'Protein' },
            cheese: { production: 13.5, category: 'Dairy' },
            milk: { production: 8.0, category: 'Dairy' },
            bread: { production: 1.5, category: 'Grain' },
            rice: { production: 4.0, category: 'Grain' },
            vegetables: { production: 2.0, category: 'Vegetable' },
            fruits: { production: 0.7, category: 'Fruit' },
            berries: { production: 1.5, category: 'Fruit' }
        };

        const disposalFactors = {
            landfill: 0.5,
            composting: 0.1,
            incineration: 0.9
        };

        function calculateWasteProbability(daysToExpiry) {
            // Sigmoid function: P_waste(d) = 1 / (1 + e^(0.5*(d-2)))
            return 1 / (1 + Math.exp(0.5 * (daysToExpiry - 2)));
        }

        function getScoreRating(score) {
            if (score <= 20) return { text: 'Excellent', class: 'score-excellent' };
            if (score <= 40) return { text: 'Good', class: 'score-good' };
            if (score <= 60) return { text: 'Moderate', class: 'score-moderate' };
            return { text: 'Needs Improvement', class: 'score-poor' };
        }

        function generateRecommendations(data) {
            const recommendations = [];

            if (data.wastePercentage > 0.4) {
                recommendations.push(`Your waste rate is ${(data.wastePercentage * 100).toFixed(0)}% - try buying smaller quantities`);
            }

            if (data.costMultiplier > 2.0) {
                recommendations.push(`True cost is ${data.costMultiplier.toFixed(1)}x higher than expected - focus on storage optimization`);
            }

            if (data.daysToExpiry < 3) {
                recommendations.push('Item is close to expiry - consume immediately or freeze for later');
            }

            if (data.carbonImpact > 50) {
                recommendations.push(`High carbon impact (${data.carbonImpact.toFixed(0)} kg CO‚ÇÇe) - prioritize reducing this category`);
            }

            if (data.disposalMethod === 'landfill' && data.category === 'Vegetable') {
                recommendations.push('Consider composting vegetable waste instead of landfill disposal');
            }

            if (data.category === 'beef' && data.wastePercentage > 0.1) {
                recommendations.push('Beef has the highest environmental impact - even small reductions make big difference');
            }

            if (recommendations.length === 0) {
                recommendations.push('Great job! Your waste management is efficient');
            }

            return recommendations;
        }

        function calculateImpact() {
            // Get input values
            const foodCategory = document.getElementById('foodCategory').value;
            const purchaseWeight = parseFloat(document.getElementById('purchaseWeight').value);
            const purchaseCost = parseFloat(document.getElementById('purchaseCost').value);
            const wasteWeight = parseFloat(document.getElementById('wasteWeight').value);
            const daysToExpiry = parseInt(document.getElementById('daysToExpiry').value);
            const disposalMethod = document.getElementById('disposalMethod').value;

            // Validation
            if (!foodCategory || isNaN(purchaseWeight) || isNaN(purchaseCost) || isNaN(wasteWeight)) {
                alert('Please fill in all required fields!');
                return;
            }

            if (wasteWeight > purchaseWeight) {
                alert('Waste weight cannot exceed purchase weight!');
                return;
            }

            // Get emission factors
            const efProduction = emissionFactors[foodCategory].production;
            const efDisposal = disposalFactors[disposalMethod];
            const category = emissionFactors[foodCategory].category;

            // Calculate metrics
            const edibleWeight = purchaseWeight - wasteWeight;
            const wastePercentage = wasteWeight / purchaseWeight;
            const trueCostPerKg = purchaseCost / edibleWeight;
            const apparentCostPerKg = purchaseCost / purchaseWeight;
            const costMultiplier = trueCostPerKg / apparentCostPerKg;
            const wasteCost = (wasteWeight / purchaseWeight) * purchaseCost;

            // Carbon calculations
            const productionImpactSaved = wasteWeight * efProduction;
            const disposalImpactCost = wasteWeight * efDisposal;
            const netCarbonSaved = productionImpactSaved - disposalImpactCost;

            // Sustainability score (0-100, lower is better)
            const economicScore = Math.min((wasteCost / 10) * 100, 100);
            const environmentalScore = Math.min((netCarbonSaved / 50) * 100, 100);
            const compositeScore = (economicScore * 0.5) + (environmentalScore * 0.5);

            // Waste probability
            const wasteProbability = calculateWasteProbability(daysToExpiry);

            // Store data for recommendations
            const data = {
                wastePercentage,
                costMultiplier,
                daysToExpiry,
                carbonImpact: netCarbonSaved,
                disposalMethod,
                category
            };

            // Display results
            displayResults({
                trueCostPerKg,
                apparentCostPerKg,
                costMultiplier,
                wasteCost,
                productionImpactSaved,
                disposalImpactCost,
                netCarbonSaved,
                compositeScore,
                wasteProbability,
                wastePercentage
            });

            // Generate and display recommendations
            const recommendations = generateRecommendations(data);
            displayRecommendations(recommendations);

            // Display comparison table
            displayComparisonTable({
                wastePercentage,
                costMultiplier,
                netCarbonSaved,
                compositeScore
            });
        }

        function displayResults(results) {
            // Show results container
            document.getElementById('resultsContainer').classList.remove('hidden');
            document.getElementById('placeholderText').classList.add('hidden');
            document.getElementById('recommendationsSection').classList.remove('hidden');
            document.getElementById('comparisonSection').classList.remove('hidden');

            // Economic impact
            document.getElementById('trueCostPerKg').textContent = '$' + results.trueCostPerKg.toFixed(2) + '/kg';
            document.getElementById('apparentCost').textContent = '$' + results.apparentCostPerKg.toFixed(2) + '/kg';
            document.getElementById('wasteCost').textContent = '$' + results.wasteCost.toFixed(2);
            document.getElementById('costMultiplier').textContent = results.costMultiplier.toFixed(2) + 'x';

            // Environmental impact
            document.getElementById('carbonSaved').textContent = results.netCarbonSaved.toFixed(1) + ' kg CO‚ÇÇe';
            document.getElementById('productionImpact').textContent = results.productionImpactSaved.toFixed(1);
            document.getElementById('disposalImpact').textContent = results.disposalImpactCost.toFixed(1);

            // Sustainability score
            const scoreRating = getScoreRating(results.compositeScore);
            document.getElementById('compositeScore').textContent = results.compositeScore.toFixed(0) + '/100';
            
            const scoreIndicator = document.getElementById('scoreIndicator');
            scoreIndicator.textContent = scoreRating.text;
            scoreIndicator.className = 'score-indicator ' + scoreRating.class;

            const progressFill = document.getElementById('scoreProgress');
            progressFill.style.width = results.compositeScore + '%';
            progressFill.textContent = results.compositeScore.toFixed(0) + '%';

            // Waste probability
            document.getElementById('wasteProbability').textContent = (results.wasteProbability * 100).toFixed(0) + '%';
        }

        function displayRecommendations(recommendations) {
            const list = document.getElementById('recommendationsList');
            list.innerHTML = '';
            
            recommendations.forEach(rec => {
                const li = document.createElement('li');
                li.textContent = rec;
                list.appendChild(li);
            });
        }

        function displayComparisonTable(metrics) {
            const tbody = document.getElementById('comparisonTableBody');
            tbody.innerHTML = '';

            const rows = [
                {
                    metric: 'Waste Percentage',
                    value: (metrics.wastePercentage * 100).toFixed(0) + '%',
                    target: '< 15%',
                    status: metrics.wastePercentage < 0.15 ? '‚úÖ Good' : '‚ö†Ô∏è Improve'
                },
                {
                    metric: 'Cost Multiplier',
                    value: metrics.costMultiplier.toFixed(2) + 'x',
                    target: '< 1.5x',
                    status: metrics.costMultiplier < 1.5 ? '‚úÖ Good' : '‚ö†Ô∏è Improve'
                },
                {
                    metric: 'Carbon Impact',
                    value: metrics.netCarbonSaved.toFixed(1) + ' kg CO‚ÇÇe',
                    target: '< 30 kg',
                    status: metrics.netCarbonSaved < 30 ? '‚úÖ Good' : '‚ö†Ô∏è Improve'
                },
                {
                    metric: 'Overall Score',
                    value: metrics.compositeScore.toFixed(0) + '/100',
                    target: '< 40',
                    status: metrics.compositeScore < 40 ? '‚úÖ Good' : '‚ö†Ô∏è Improve'
                }
            ];

            rows.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${row.metric}</strong></td>
                    <td>${row.value}</td>
                    <td>${row.target}</td>
                    <td>${row.status}</td>
                `;
                tbody.appendChild(tr);
            });
        }
    </script>
</body>
</html>